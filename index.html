<!DOCTYPE html>
<html lang="en">
<head>

<!-- âœ… BEGIN DIKLIJSTCODE -->
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

<!-- ðŸŒŸ SEO & Vindbaarheid -->
<title>Checkout â€“ Starplanner | Astrology & Goalsetting Planner 2025</title>
<meta name="description" content="Complete your Starplanner order. Astrology-inspired planners and birthday templates â€” colourful, practical and built for goalsetting & productivity." />
<meta name="author" content="Starplanner" />
<meta name="robots" content="noindex, follow" />
<link rel="canonical" href="https://www.starplanner.com/checkout.html" />

<!-- ðŸ” Zoekwoorden -->
<meta name="keywords" content="Astrologie planner, Astrology planner, Astrologie agenda, Astrology agenda, Birthday template, Verjaardagstemplate, Verjaardagskalender, Verjaardagskalender template, Planner starting in April, Agenda starting in April, full 12 month agenda, celestial planner, celestial agenda, most practical planner, most practical agenda, to do list agenda, to do list planner, goalsetting planner, goalsetting agenda, colorful planner, colourfull planner, colourfull agenda, ADHD planner, ADHD agenda, mindful planner, productivity planner, daily planner, weekly planner, monthly planner, creative planner, self care planner, spiritual planner, zodiac planner, manifestation planner, bullet journal, journaling planner, digital planner, printable planner, habit tracker planner, planner for students, planner for work, 2025 planner, astrology goals, horoscope planner, planner with moon phases, celestial design planner, dream planner, personal growth planner, focus planner, planner met affirmaties, planner met doelen, planner met to do lijst, planner met overzicht, agenda met doelensheets, praktische planner, kleurrijke planner, stijlvolle planner, star themed planner" />

<!-- ðŸ“± PWA/Mobiel -->
<meta name="theme-color" content="#FFC90E" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<!-- ðŸ’¬ Open Graph -->
<meta property="og:title" content="Checkout â€“ Starplanner">
<meta property="og:description" content="Finish your Starplanner purchase â€” astrology & goalsetting planners and templates.">
<meta property="og:image" content="https://www.starplanner.com/starplanner-preview.jpg">
<meta property="og:url" content="https://www.starplanner.com/checkout.html">
<meta property="og:type" content="website">

<!-- ðŸ¦ Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Checkout â€“ Starplanner">
<meta name="twitter:description" content="Complete your purchase for the Starplanner and birthday templates.">
<meta name="twitter:image" content="https://www.starplanner.com/starplanner-preview.jpg">

<!-- ðŸš€ Performance -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;600&family=Poppins:ital,wght@1,500&display=swap" rel="stylesheet">
<link rel="preload" as="image" href="shoppingbag.svg">
<link rel="preload" as="image" href="ArtworkWaterverfkwastachterkopjes.jpg">

<!-- ðŸ“„ Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "WebPage",
  "name": "Checkout â€“ Starplanner",
  "url": "https://www.starplanner.com/checkout.html",
  "description": "Checkout page to complete orders for Starplanner products."
}
</script>

<!-- âš¡ Mobiel-optimalisaties zonder desktop te beÃ¯nvloeden -->
<style>
  img { max-width: 100%; height: auto; }
  body { -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; }
  /* Alleen mobiel tweaks */
  @media (max-width: 768px) {
    nav { flex-wrap: wrap; padding: 20px; background-size: cover; }
    nav ul { flex-direction: column; gap: 20px; padding-left: 0; align-items: center; }
    .cart-item { gap: 10px; }
    .cart-item-right { width: 100%; justify-content: space-between; }
    .qty-controls { width: 100%; justify-content: center; }
    footer { text-align: center; }
  }
</style>
<!-- âœ… EINDE DIKLIJSTCODE -->

<style>
  body{font-family:'Montserrat Alternates',sans-serif;margin:0;padding:0;background:#fff;}

  /* Header */
  nav{
    background-image:url('ArtworkWaterverfkwastachterkopjes.jpg');
    background-repeat:no-repeat;background-position:center;background-size:120% 110%;
    padding:40px 60px;display:flex;justify-content:space-between;align-items:center;
  }
  nav ul{list-style:none;margin:0;padding:0;display:flex;gap:70px;padding-left:100px;}
  nav ul li a{text-decoration:none;color:white;font-size:18px;font-weight:600;text-shadow:1px 1px 3px rgba(0,0,0,0.3);}
  nav ul li a:hover{color:#FF7929;}
  .nav-icons{display:flex;gap:30px;align-items:center;position:relative;}
  .nav-icons img{width:36px;height:36px;cursor:pointer;}
  .cart-link{position:relative;}
  .cart-badge{position:absolute;top:-6px;right:-6px;background:#FF6F61;color:#fff;font-size:12px;font-weight:600;padding:2px 6px;border-radius:50%;min-width:18px;text-align:center;}

  /* Content */
  main{padding:20px;max-width:900px;margin:0 auto;}
  h1{color:#FFC90E;text-align:center;margin-top:30px;margin-bottom:10px;}
  .continue{color:#FFC90E;text-decoration:underline;text-align:center;cursor:pointer;}
  .cart-header{display:flex;justify-content:space-between;margin:40px 0 20px;color:#FFC90E;font-weight:600;font-size:16px;}

  /* Items */
  .cart-item{display:flex;justify-content:space-between;align-items:center;padding:18px 0;border-bottom:1px solid #ddd;gap:10px;flex-wrap:wrap;}
  .cart-item-left{display:flex;align-items:center;gap:15px;flex:1;}
  .cart-item img.product-thumb{width:80px;height:auto;border-radius:6px;}
  .product-info{flex:1;}

  .cart-item-right{display:flex;align-items:center;gap:20px;justify-content:flex-end;min-width:220px;flex-wrap:wrap;}
  .price{font-weight:600;color:#333;font-size:16px;}

  /* âœ… Zichtbare qty controls */
  .qty-controls{
    display:flex;align-items:center;justify-content:center;gap:6px;
    background:#fff;border:1.5px solid #FFC90E;border-radius:8px;padding:5px 10px;
  }
  .qty-btn{
    background:#FFC90E;border:none;color:#fff;font-size:18px;width:28px;height:28px;
    border-radius:6px;cursor:pointer;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:background .2s;
  }
  .qty-btn:hover{background:#e6b800;}
  .qty-box{min-width:28px;text-align:center;font-weight:600;font-size:16px;color:#333;}

  /* Summary */
  .empty-cart{text-align:center;font-size:18px;color:#666;margin:40px 0;}
  .summary{margin-top:40px;font-size:18px;font-weight:600;color:#333;}
  .tax-note{font-size:14px;color:#FFC90E;font-weight:400;margin-top:4px;}
  .checkout-btn{
    display:inline-block;margin-top:20px;padding:16px 36px;background:#FFC90E;color:#fff;
    font-size:18px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background .2s;
  }
  .checkout-btn:hover{background:#e6b800;}

  /* Footer */
  footer{position:relative;margin-top:60px;overflow:hidden;}
  .footer-decoration{width:100%;height:100px;object-fit:cover;display:block;}
  .footer-text{position:absolute;bottom:10px;width:100%;text-align:center;color:#fff;font-size:14px;text-shadow:1px 1px 3px rgba(0,0,0,0.5);}

  /* Loading overlay (optioneel visueel) */
  #loading-overlay{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(255,255,255,0.8);backdrop-filter:blur(2px);
    display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;
    transition:opacity 1.2s ease,visibility 1.2s ease;
  }
  .loading-text{
    font-family:'Poppins',sans-serif;font-style:italic;font-weight:500;font-size:22px;letter-spacing:.5px;
    background:linear-gradient(90deg,#fff7cc,#ffe4b2,#ffd7a3,#ffc38b,#ffb07a);
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 8px rgba(255,207,150,.3);margin-bottom:18px;
  }
  .loading-bar{
    width:60%;height:10px;border-radius:8px;
    background:linear-gradient(135deg,#ffffff 0%,#FFF8D6 20%,#FFE6B3 40%,#FFD18B 60%,#FFB35C 80%,#FFA073 100%);
    background-size:300% 300%;animation:gradientFlow 2.5s ease-in-out infinite;box-shadow:0 0 12px rgba(255,180,90,.25);
  }
  @keyframes gradientFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
  #loading-overlay.fade-out{opacity:0;visibility:hidden;}
</style>
</head>

<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">HOME</a></li>
        <li><a href="thestorybehind.html">THE STORY BEHIND</a></li>
        <li><a href="shop.html">SHOP</a></li>
        <li><a href="plannertips.html">PLANNER TIPS</a></li>
        <li><a href="contact.html">CONTACT</a></li>
      </ul>
      <div class="nav-icons">
        <a href="account.html"><img src="user-icon.svg" alt="User"></a>
        <a href="checkout.html" class="cart-link">
          <img src="shoppingbag.svg" alt="Shopping Bag">
          <span id="cart-count" class="cart-badge">0</span>
        </a>
      </div>
    </nav>
  </header>

  <main>
    <h1>Your cart</h1>
    <div class="continue" onclick="window.location.href='shop.html'">Continue shopping</div>

    <div class="cart-header">
      <div>PRODUCT</div>
      <div>PRICE</div>
    </div>

    <div id="cart-items" class="cart-items"></div>

    <div class="summary">
      Subtotal: â‚¬<span id="subtotal">0.00</span>
      <div class="tax-note">Taxes and shipping calculated at checkout</div>
      <button class="checkout-btn" onclick="placeOrder()">Checkout</button>
    </div>
  </main>

  <footer>
    <img src="ArtworkWaterverfkwastfootheader.jpg" alt="Footer Decoration" class="footer-decoration">
    <div class="footer-text">Â© 2025 Starplanner â€“ All rights reserved.</div>
  </footer>

  <!-- Optional: loading overlay -->
  <div id="loading-overlay" style="display:none;">
    <div class="loading-text">Sprinkling a little stardustâ€¦</div>
    <div class="loading-bar"></div>
  </div>

  <!-- Firebase (Compat, zoals je eerder gebruikte) -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyApt-W5-Ag4Ov2JxVcudSrV4VL0zCBE8pc",
      authDomain: "starplanner-3acf9.firebaseapp.com",
      projectId: "starplanner-3acf9",
      storageBucket: "starplanner-3acf9.firebasestorage.app",
      messagingSenderId: "793684440573",
      appId: "1:793684440573:web:5beb2ab6f64b4fc110d594"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const cartContainer = document.getElementById('cart-items');
    const subtotalEl = document.getElementById('subtotal');
    const cartCount = document.getElementById('cart-count');
    const overlay = document.getElementById('loading-overlay');

    // âœ… HOME-link guard (forceer altijd naar index.html)
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('nav a').forEach(a => {
        if (a.textContent.trim().toUpperCase() === 'HOME') a.setAttribute('href','index.html');
      });
    });

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    updateCartCount();

    function updateCartCount() {
      const totalQty = cart.reduce((sum, item) => sum + (Number(item.qty) || 1), 0);
      cartCount.textContent = totalQty;
    }

    function renderCart() {
      cart = cart.map(i => ({ ...i, qty: Number(i.qty) || 1 }));
      cartContainer.innerHTML = '';
      let total = 0;

      if (cart.length === 0) {
        cartContainer.innerHTML = `<div class="empty-cart">Your cart is empty</div>`;
      } else {
        cart.forEach((item, index) => {
          const div = document.createElement('div');
          div.classList.add('cart-item');
          div.innerHTML = `
            <div class="cart-item-left">
              <img src="shoppingbag.svg" alt="${item.name}" class="product-thumb">
              <div class="product-info">
                <div>${item.name}</div>
              </div>
            </div>
            <div class="cart-item-right">
              <div class="price">â‚¬${Number(item.price).toFixed(2)}</div>
              <div class="qty-controls">
                <button class="qty-btn" onclick="updateQty(${index}, -1)" aria-label="Decrease">â€“</button>
                <span class="qty-box">${item.qty}</span>
                <button class="qty-btn" onclick="updateQty(${index}, 1)" aria-label="Increase">+</button>
              </div>
            </div>
          `;
          cartContainer.appendChild(div);
          total += Number(item.price) * item.qty;
        });
      }
      subtotalEl.textContent = total.toFixed(2);
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }

    function updateQty(index, delta) {
      cart[index].qty = (Number(cart[index].qty) || 1) + delta;
      if (cart[index].qty <= 0) {
        removeItem(index);
        return;
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCount();
      renderCart();
    }

    async function placeOrder() {
      const user = auth.currentUser;
      if (!user) {
        alert("You must be logged in to complete your order.");
        return;
      }
      if (cart.length === 0) {
        alert("Your cart is empty.");
        return;
      }

      const totalAmount = cart.reduce((sum, item) => sum + (Number(item.price) * (Number(item.qty) || 1)), 0);

      try {
        overlay.style.display = 'flex';
        await db.collection('orders').add({
          userId: user.uid,
          email: user.email,
          items: cart,
          total: totalAmount,
          date: firebase.firestore.FieldValue.serverTimestamp()
        });
        alert("âœ… Your order has been placed successfully!");
        localStorage.removeItem('cart');
        window.location.href = "account.html";
      } catch (error) {
        alert("âŒ Error placing order: " + error.message);
      } finally {
        overlay.classList.add('fade-out');
        setTimeout(() => overlay.style.display = 'none', 1200);
      }
    }

    // Start render
    window.addEventListener('load', renderCart);
  </script>
</body>
</html>
